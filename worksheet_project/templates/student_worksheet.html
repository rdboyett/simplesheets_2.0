{% extends "base_student_worksheet.html" %}
{% load staticfiles %}


{% block title %}{{ newProject.title|capfirst }}{% endblock %}



{% block extraBottomHead %}
      <!-- jQuery UI -->
      <script type="text/javascript" src="{% static "page_view/js/jquery.ui.core.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/js/jquery.ui.widget.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/js/jquery.ui.mouse.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/js/jquery.ui.draggable.js" %}"></script>
      
      <!-- wColorPicker -->
      <link rel="Stylesheet" type="text/css" href="{% static "page_view/css/wColorPicker.min.css" %}" />
      <script type="text/javascript" src="{% static "page_view/js/wColorPicker.min.js" %}"></script>

      <!-- wPaint -->
      <link rel="Stylesheet" type="text/css" href="{% static "page_view/css/wPaint.min.css" %}" />
      <script type="text/javascript" src="{% static "page_view/js/wPaint.min.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/plugins/main/wPaint.menu.main.min.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/plugins/text/wPaint.menu.text.min.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/plugins/shapes/wPaint.menu.main.shapes.min.js" %}"></script>
      <script type="text/javascript" src="{% static "page_view/plugins/file/wPaint.menu.main.file.min.js" %}"></script>
	
    <script type="text/javascript" src="{% static "page_view/js/spin.js" %}"></script>
{% endblock %}


    

{% block body %}
	<button id="gradeWorksheet" class="btn btn-primary">grade worksheet</button>
	<button id="zoom-out-btn" class="btn btn-primary"><span class="fa fa-search-minus"></span></button>
	<button id="zoom-in-btn" class="btn btn-primary"><span class="fa fa-search-plus"></button>
<section id="wrapper-holder">
    <section id="wrapper">
	{% for backImage in newProject.backgroundImages.all %}
	    {% ifequal backImage.pageNumber pageNumber %}
	    <img id="backgroundImage" class="large-img-rounded shadow" src="{{ MEDIA_URL }}{{ backImage.imagePath }}"/>
	    {% endifequal %}
	{% endfor %}
	
	
	{% if pageNumber > 1 %}
	<a href="/nextPage/{{ newProject.id }}/{{ pageNumber|add:"-1" }}/" title="Previous"><div id="leftNav" class="nav_button_holder"></div></a>
	{% endif %}
	{% ifnotequal pageNumber totalPages %}
	<a href="/nextPage/{{ newProject.id }}/{{ pageNumber|add:"1" }}/" title="Next"><div id="rightNav" class="nav_button_holder"></div></a>
	{% endifnotequal %}
	
	<form id="default_form">
	{% if formInputs %}
	    {% for input in formInputs %}
		{% ifequal input.pageNumber pageNumber %}
		    {% if input.inputType == 'textarea' %}
			<textarea id="input{{ input.id }}" class="answers highlight"
				  data-options='{
				    "answer_id":"{{ input.id }}",
				    "question_number":"{{ input.questionNumber }}",
				    "input_type":"{{ input.inputType }}",
				    "points":"{{ input.points }}",
				    "help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %},
				    "help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}'
				  style="
				    position: absolute;
				    z-index: 1;
				    left: {{ input.left }}%;
				    top: {{ input.top }}%;
				    width: {{ input.width }}%;
				    height: {{ input.height }}%"></textarea>
			
		    {% elif input.inputType == 'work' %}
			<div id="workinput{{ input.id }}" class="highlight" readonly="readonly"
				  data-options='{
				    "answer_id":"{{ input.id }}",
				    "question_number":"{{ input.questionNumber }}",
				    "input_type":"{{ input.inputType }}",
				    "points":"{{ input.points }}",
				    "help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %},
				    "help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}'
				    
				  style="
				    position: absolute;
				    z-index: 1;
				    left: {{ input.left }}%;
				    top: {{ input.top }}%;
				    width: {{ input.width }}%;
				    height: {{ input.height }}%">
			    <img src="{{ MEDIA_URL }}{{ input.workImagePath }}" />
			    <div class="show_work btn btn-primary"
				 style="z-index:
				 1;
				 position: absolute;
				 left: 1%;
				 bottom: 5px;
				 font-size: 14px;
				 text-align: center;
				 cursor: pointer;">Show your<br>work here</div>
			    <div class="reset-image btn btn-primary popovers"
				 style="z-index:
				 1;
				 position: absolute;
				 left: 45%;
				 bottom: 5px;
				 font-size: 14px;"
				 onclick="resetImagePath('{{ input.id }}', '{{ MEDIA_URL }}{{ input.workImagePath }}')"
				 data-container="body" data-toggle="popover" data-placement="bottom" data-trigger="hover"
				 data-content="reset work area"><span class="fa fa-reply"></span></div>
			    <div class="work-button"
				 style="z-index:
				 1;
				 position: absolute;
				 right: 1%;
				 bottom: 5px;
				 text-align: center;
				 width: 20%;"><span style="font-size: 12px;">answer here</span>
				<input id="input{{ input.id }}" class="answers highlight" value="" name=""
				       data-options='{
				       "answer_id":"{{ input.id }}",
				       "question_number":"{{ input.questionNumber }}",
				       "input_type":"{{ input.inputType }}",
				       "points":"{{ input.points }}",
				       "help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %},
				       "help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}' type="text"
				       style="width:70%;" title="answer..." name="">
			    </div>
			</div>
			
		    {% elif input.inputType == 'select' %}
			<select id="input{{ input.id }}" class="answers highlight"
				data-options='{
				    "answer_id":"{{ input.id }}",
				    "question_number":"{{ input.questionNumber }}",
				    "input_type":"{{ input.inputType }}",
				    "points":"{{ input.points }}",
				    "help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %},
				    "help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}'
				style="
				    position: absolute;
				    z-index: 1;
				    left: {{ input.left }}%;
				    top: {{ input.top }}%;
				    width: {{ input.width }}%;
				    height: {{ input.height }}%">
			    
			    <option id="option0" value="none">Select One...</option>
			    {% if input.option1 %}
			    <option id="option1" value="option1">{{ input.option1 }}</option>
			    {% endif %}
			    {% if input.option2 %}
			    <option id="option2" value="option2">{{ input.option2 }}</option>
			    {% endif %}
			    {% if input.option3 %}
			    <option id="option3" value="option3">{{ input.option3 }}</option>
			    {% endif %}
			    {% if input.option4 %}
			    <option id="option4" value="option4">{{ input.option4 }}</option>
			    {% endif %}
			</select>
			
		    {% elif input.inputType == 'checkbox' %}
			<input id="input{{ input.id }}" class="answers highlight"
			       data-options='{
				"answer_id":"{{ input.id }}",
				"question_number":"{{ input.questionNumber }}",
				"input_type":"{{ input.inputType }}",
				"points":"{{ input.points }}",
				"help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %},
				"help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}'
			       type="{{ input.inputType }}" title='answer...'
			       name=""
			       style="
				position: absolute;
				z-index: 1;
				left: {{ input.left }}%;
				top: {{ input.top }}%;
				width: {{ input.width }}%;
				height: {{ input.height }}%">
			    
		    {% else %}
			<input id="input{{ input.id }}" class="answers highlight"
			       data-options='{
				"answer_id":"{{ input.id }}",
				"question_number":"{{ input.questionNumber }}",
				"input_type":"{{ input.inputType }}",
				"points":"{{ input.points }}",
				"help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %},
				"help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}'
			       type="{{ input.inputType }}" title='answer...'
			       value="" name=""
			       style="
				position: absolute;
				z-index: 1;
				left: {{ input.left }}%;
				top: {{ input.top }}%;
				width: {{ input.width }}%;
				height: {{ input.height }}%">
			    
		    {% endif %}
		    
		    {% if input.helpText or input.helpLink %}
		    <div id="help{{ input.id }}" class="helpQuestionMark popovers" data-container="body"
			data-toggle="popover" data-placement="bottom" data-trigger="hover"
			data-content="help">
			<span class="fa fa-question-circle text-danger"></span>
		    </div>
		    <script>
			$("#input{{ input.id }}").data('bCorrect','incorrect');
			$("#help{{ input.id }}").attr('data-options','{"help_text":{% if input.helpText %}"{{ input.helpText }}"{% else %}""{% endif %}, "help_link":{% if input.helpLink %}"{{ input.helpLink }}"{% else %}""{% endif %}}');
			var left = parseFloat({{ input.left }})+parseFloat({{ input.width }})+.5;
			$("#help{{ input.id }}").css({
			    'left':left+'%',
			    'top':'{{ input.top }}%',
			});
		    </script>
		    {% endif %}
		    
		{% endifequal %}
	    {% endfor %}
	{% endif %}
	</form>
	
	
	
	
	
    </section>
</section>
{% endblock %}


{% block modal %}
    
    
<!-- *****************    display grade modal   ******************************************************* -->
<div id="display-grade-modal" class="modal fade" role="dialog" aria-labelledby="basicModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content rounded">
      <div class="modal-header top-rounded">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
        <h4 class="modal-title">Grade</h4>
      </div>
      <div class="modal-body centered">
	    
      </div>
      <div class="modal-footer bottom-rounded">
        <button type="button" class="btn btn-default rounded" data-dismiss="modal">close</button>
        <button id="retry-btn" type="button" class="btn btn-primary rounded">retry</button>
      </div>
    </div>
  </div>
</div>


    
{% endblock %}






{% block extraScript %}
    
    

    
    
    <script>
	
    {% if myAnswers %}
	{% if formInputs %}
	    {% for input in formInputs %}
		{% ifequal input.pageNumber pageNumber %}
		{% for myAnswer in myAnswers %}
		    {% ifequal myAnswer.answer.id input.id %}
			{% if myAnswer.bCorrect %}
			$("#input{{ input.id }}").data('bCorrect','correct');
			{% endif %}
		    {% if input.inputType == 'work' %}
			$('#workinput{{ input.id }} img').attr('src', '{{ MEDIA_URL }}{{ myAnswer.workImagePath }}')
			{% if myAnswer.myAnswer %}
			$('#input{{ input.id }}').val('{{ myAnswer.myAnswer }}');
			{% endif %}
			
		    {% elif input.inputType == 'checkbox' %}
			$('#input{{ input.id }}').prop("checked", {{ myAnswer.myAnswer }});
				
		    {% else %}
			$('#input{{ input.id }}').val('{{ myAnswer.myAnswer }}');
		    {% endif %}
		    {% endifequal %}
		{% endfor %}
		{% endifequal %}
	    {% endfor %}
	{% endif %}
    {% endif %}
	
    </script>
    
    
    <script>
	/***********  Ajax URL's **********************/
	
            var userInfo_id_ajax = {{ userInfo.id }};
            var project_id_ajax = {{ newProject.id }};
            var pageNumber_ajax = {{ pageNumber }};
	    var sendStudentAnswerURL = "{% url "worksheet_creator.page_view_ajax.sendStudentAnswer" %}";
	    var submitGradeWorksheetURL = "{% url "worksheet_creator.page_view_ajax.submitGradeWorksheet" %}";
	    var uploadWorkboxImageURL = "{% url "worksheet_creator.page_view_ajax.uploadWorkboxImage" %}";
    </script>
    
    
    <script src="{% static "adminBoot/js/edit_worksheets/student_worksheet.js" %}"></script>
    
    
{% endblock %}